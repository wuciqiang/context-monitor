---
description: 拆分任务并开始实施（Phase 3-4）
---

# 任务拆分与实施

执行 Phase 3-4：原型获取与编码实施

## Phase 3: 原型获取

1. **上下文检查**
   - 调用 `check_context_usage` 检查使用率
   - 如果 > 70%，先保存状态

2. **选择路由**
   - **Route A (前端/UI)**：调用 Gemini skill
   - **Route B (后端/逻辑)**：调用 Codex skill
   - 要求返回 Unified Diff Patch

## Phase 4: 编码实施

3. **任务原子化**
   - 将任务拆分为原子级任务
   - 每个任务：
     * 最多涉及 3 个文件
     * 30 分钟内完成
     * 单一职责
     * 可独立测试
   - 使用 `TodoWrite` 工具记录所有任务

4. **逐步实施**
   - 按顺序实施每个原子任务
   - 每完成一个任务，标记为 completed
   - 每完成 3-5 个文件修改后，调用 `check_context_usage`
   - 如果使用率 > 85%，立即保存状态

5. **代码重构**
   - 基于原型重写为企业级代码
   - 精简高效，非必要不添加注释
   - 变更仅限需求范围
   - 强制审查是否引入副作用

**输出**：企业级生产代码 + 任务完成清单
