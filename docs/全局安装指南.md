# å…¨å±€å®‰è£…æŒ‡å—
# Global Installation Guide

> å°†æ•´åˆå·¥ä½œæµå®‰è£…åˆ° Claude Code å…¨å±€é…ç½®

---

## ğŸ¯ å®‰è£…ç›®æ ‡

å°†ä»¥ä¸‹ç»„ä»¶å®‰è£…åˆ°å…¨å±€é…ç½®ï¼ˆ`~/.claude/`ï¼‰ï¼Œè®©æ‰€æœ‰é¡¹ç›®è‡ªåŠ¨ä½¿ç”¨ï¼š

- âœ… **CLAUDE.md** - å®Œæ•´å·¥ä½œæµå®šä¹‰
- âœ… **Code Index MCP** - æ™ºèƒ½ä»£ç æ£€ç´¢
- âœ… **Multi-Model Skills** - Codex å’Œ Gemini åä½œæŠ€èƒ½ï¼ˆå¯é€‰ï¼‰

**æ³¨æ„**: Context Monitor éœ€è¦åœ¨æ¯ä¸ªé¡¹ç›®ä¸­å•ç‹¬å®‰è£…ï¼Œè¯·å‚è€ƒ [é¡¹ç›®çº§å®‰è£…æŒ‡å—.md](./é¡¹ç›®çº§å®‰è£…æŒ‡å—.md)

---

## ğŸš€ å¿«é€Ÿå®‰è£…

### Windows (PowerShell)

```powershell
cd F:\LayaAir-GitHub\context-monitor
.\install-global-simple.ps1
```

### macOS / Linux (Bash)

```bash
cd /path/to/context-monitor
chmod +x install-global.sh
./install-global.sh
```

---

## ğŸ“‹ å®Œæ•´å®‰è£…æ­¥éª¤

### æ­¥éª¤ 1: å®‰è£… Multi-Model Skillsï¼ˆå¯é€‰ä½†æ¨èï¼‰

Skills æä¾›å¤šæ¨¡å‹åä½œåŠŸèƒ½ï¼Œè®© Claude å¯ä»¥è°ƒç”¨ Codex å’Œ Gemini ååŠ©å·¥ä½œã€‚

**è¯¦ç»†è¯´æ˜**: è¯·å‚è€ƒ **[Skillså®‰è£…æŒ‡å—.md](./Skillså®‰è£…æŒ‡å—.md)**

**å¿«é€Ÿå®‰è£…**:
```bash
# å…‹éš† GuDaStudio Skills
git clone https://github.com/GuDaStudio/skills.git /tmp/gudastudio-skills

# å¤åˆ¶åˆ°å…¨å±€ skills ç›®å½•
cp -r /tmp/gudastudio-skills/collaborating-with-codex ~/.claude/skills/
cp -r /tmp/gudastudio-skills/collaborating-with-gemini ~/.claude/skills/

# æ¸…ç†
rm -rf /tmp/gudastudio-skills
```

**å¦‚æœè·³è¿‡æ­¤æ­¥éª¤**: ç³»ç»Ÿä»å¯å·¥ä½œï¼Œä½†ä¼šç¼ºå°‘å¤šæ¨¡å‹åä½œåŠŸèƒ½ï¼ˆPhase 2ã€3ã€5ï¼‰ã€‚

---

### æ­¥éª¤ 2: å®‰è£… CLAUDE.md å’Œ Code Index MCP

#### 2.1 å¤‡ä»½ç°æœ‰é…ç½®

å®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨å¤‡ä»½ï¼š
- `~/.claude/CLAUDE.md` â†’ `CLAUDE.md.backup.YYYYMMDD_HHMMSS`
- `~/.claude/mcp.json` â†’ `mcp.json.backup.YYYYMMDD_HHMMSS`

#### 2.2 å®‰è£… CLAUDE.md

å°†æ•´åˆå·¥ä½œæµçš„ CLAUDE.md å¤åˆ¶åˆ°å…¨å±€ç›®å½•ï¼š
```
~/.claude/CLAUDE.md
```

#### 2.3 é…ç½® Code Index MCP

åœ¨ `~/.claude/mcp.json` ä¸­æ·»åŠ ï¼š
```json
{
  "mcpServers": {
    "code-index": {
      "type": "stdio",
      "command": "uvx",
      "args": ["code-index-mcp"],
      "env": {}
    }
  }
}
```

---

## âœ… éªŒè¯å®‰è£…

### 1. æ£€æŸ¥æ–‡ä»¶

```bash
# Windows
dir C:\Users\admin\.claude\CLAUDE.md
type C:\Users\admin\.claude\mcp.json

# macOS / Linux
ls -l ~/.claude/CLAUDE.md
cat ~/.claude/mcp.json
```

### 2. é‡å¯ Claude Code

```bash
# å…³é—­æ‰€æœ‰ Claude Code çª—å£
# ç„¶åé‡æ–°å¯åŠ¨
claude
```

### 3. æµ‹è¯• Code Index MCP

åœ¨ä»»ä½•é¡¹ç›®ä¸­å¯åŠ¨ Claude Codeï¼Œç„¶åè¯´ï¼š
```
è¯·åˆå§‹åŒ–ä»£ç ç´¢å¼•
```

é¢„æœŸè¾“å‡ºï¼š
```
æ­£åœ¨è®¾ç½®é¡¹ç›®è·¯å¾„...
æ­£åœ¨æ„å»ºæ·±åº¦ç´¢å¼•...
ç´¢å¼•æ„å»ºå®Œæˆï¼
```

---

## ğŸ”§ é…ç½®è¯´æ˜

### å…¨å±€ vs é¡¹ç›®çº§

| ç»„ä»¶ | å®‰è£…ä½ç½® | ä½œç”¨èŒƒå›´ |
|------|---------|---------|
| **CLAUDE.md** | `~/.claude/CLAUDE.md` | å…¨å±€ï¼ˆæ‰€æœ‰é¡¹ç›®ï¼‰ |
| **Code Index MCP** | `~/.claude/mcp.json` | å…¨å±€ï¼ˆæ‰€æœ‰é¡¹ç›®ï¼‰ |
| **Context Monitor** | `./.claude/` (é¡¹ç›®çº§) | å•ä¸ªé¡¹ç›® |

### ä¸ºä»€ä¹ˆ Context Monitor æ˜¯é¡¹ç›®çº§ï¼Ÿ

Context Monitor éœ€è¦è®¿é—®é¡¹ç›®ç‰¹å®šçš„æ–‡ä»¶ï¼š
- `.claude/hooks/capture-session-info.sh`
- `.claude/mcp-servers/context-monitor/server.py`
- `.claude/state/` (çŠ¶æ€ä¿å­˜ç›®å½•)

å› æ­¤éœ€è¦åœ¨æ¯ä¸ªé¡¹ç›®ä¸­å•ç‹¬å®‰è£…ã€‚

---

## ğŸ“¦ é¡¹ç›®çº§å®‰è£… Context Monitor

åœ¨éœ€è¦ä½¿ç”¨ Context Monitor çš„é¡¹ç›®ä¸­ï¼š

```bash
cd /path/to/your/project

# æ–¹å¼ 1: ä½¿ç”¨ npmï¼ˆæ¨èï¼‰
npm install --save-dev @claude/context-monitor
npm run init

# æ–¹å¼ 2: æ‰‹åŠ¨å¤åˆ¶
cp -r /path/to/context-monitor/.claude ./
cp -r /path/to/context-monitor/hooks ./hooks
cp -r /path/to/context-monitor/mcp-servers ./mcp-servers
```

---

## ğŸ¯ å®Œæ•´é…ç½®ç¤ºä¾‹

### å…¨å±€é…ç½® (`~/.claude/`)

```
~/.claude/
â”œâ”€â”€ CLAUDE.md                    # âœ… æ•´åˆå·¥ä½œæµå®šä¹‰
â”œâ”€â”€ mcp.json                     # âœ… åŒ…å« code-index
â”œâ”€â”€ settings.json                # ç”¨æˆ·è®¾ç½®
â””â”€â”€ ...
```

### é¡¹ç›®é…ç½® (`./.claude/`)

```
your-project/
â”œâ”€â”€ .claude/
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ capture-session-info.sh    # Context Monitor hook
â”‚   â”œâ”€â”€ mcp-servers/
â”‚   â”‚   â””â”€â”€ context-monitor/
â”‚   â”‚       â””â”€â”€ server.py              # Context Monitor MCP
â”‚   â”œâ”€â”€ state/                         # çŠ¶æ€ä¿å­˜ç›®å½•
â”‚   â””â”€â”€ settings.local.json            # é¡¹ç›®çº§ MCP é…ç½®
â””â”€â”€ ...
```

---

## ğŸ”„ å·¥ä½œæµæ¿€æ´»

### å…¨å±€å·¥ä½œæµï¼ˆè‡ªåŠ¨æ¿€æ´»ï¼‰

å¯åŠ¨ Claude Code åï¼Œå…¨å±€ CLAUDE.md ä¼šè‡ªåŠ¨åŠ è½½ï¼š

1. âœ… **Phase 0-5** å·¥ä½œæµå®šä¹‰
2. âœ… **Resource Matrix** èµ„æºè°ƒç”¨ç­–ç•¥
3. âœ… **Code Index** ä½¿ç”¨æŒ‡å—
4. âœ… **æœ€ä½³å®è·µ** å’Œæ•…éšœæ’æŸ¥

### é¡¹ç›®çº§å¢å¼ºï¼ˆéœ€è¦å®‰è£…ï¼‰

å¦‚æœé¡¹ç›®å®‰è£…äº† Context Monitorï¼š

1. âœ… **è‡ªåŠ¨ç›‘æ§** - SessionStart hook æ•è·ä¼šè¯ä¿¡æ¯
2. âœ… **æ™ºèƒ½æé†’** - æ ¹æ®ä½¿ç”¨ç‡ä¸»åŠ¨é‡‡å–è¡ŒåŠ¨
3. âœ… **çŠ¶æ€ä¿å­˜** - è‡ªåŠ¨ä¿å­˜ä¼šè¯çŠ¶æ€

---

## ğŸ“š ä½¿ç”¨ç¤ºä¾‹

### åœºæ™¯ 1: æ–°é¡¹ç›®ï¼ˆåªæœ‰å…¨å±€é…ç½®ï¼‰

```bash
cd /path/to/new/project
claude
```

**å¯ç”¨åŠŸèƒ½**ï¼š
- âœ… æ•´åˆå·¥ä½œæµï¼ˆPhase 0-5ï¼‰
- âœ… Code Index MCPï¼ˆä»£ç æ£€ç´¢ï¼‰
- âŒ Context Monitorï¼ˆéœ€è¦å®‰è£…ï¼‰

**ä½¿ç”¨æ–¹å¼**ï¼š
```
# åˆå§‹åŒ–ä»£ç ç´¢å¼•
è¯·åˆå§‹åŒ–ä»£ç ç´¢å¼•

# å¼€å§‹å¼€å‘
æˆ‘éœ€è¦å®ç°ç”¨æˆ·è®¤è¯åŠŸèƒ½
```

### åœºæ™¯ 2: å®Œæ•´é…ç½®ï¼ˆå…¨å±€ + é¡¹ç›®çº§ï¼‰

```bash
cd /path/to/project-with-context-monitor
claude
```

**å¯ç”¨åŠŸèƒ½**ï¼š
- âœ… æ•´åˆå·¥ä½œæµï¼ˆPhase 0-5ï¼‰
- âœ… Code Index MCPï¼ˆä»£ç æ£€ç´¢ï¼‰
- âœ… Context Monitorï¼ˆä¸Šä¸‹æ–‡ç›‘æ§ï¼‰

**ä½¿ç”¨æ–¹å¼**ï¼š
```
# ç³»ç»Ÿè‡ªåŠ¨æ¿€æ´»
ğŸ“Š Context monitoring active

# æ£€æŸ¥ä¸Šä¸‹æ–‡
è¯·æ£€æŸ¥å½“å‰ä¸Šä¸‹æ–‡ä½¿ç”¨ç‡

# åˆå§‹åŒ–ä»£ç ç´¢å¼•
è¯·åˆå§‹åŒ–ä»£ç ç´¢å¼•

# å¼€å§‹å¼€å‘
æˆ‘éœ€è¦å®ç°ç”¨æˆ·è®¤è¯åŠŸèƒ½
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. CLAUDE.md ä¼˜å…ˆçº§

å¦‚æœé¡¹ç›®ä¸­ä¹Ÿæœ‰ `CLAUDE.md`ï¼ŒClaude Code ä¼šä¼˜å…ˆä½¿ç”¨é¡¹ç›®çº§çš„é…ç½®ã€‚

**å»ºè®®**ï¼š
- å…¨å±€ CLAUDE.mdï¼šé€šç”¨å·¥ä½œæµ
- é¡¹ç›® CLAUDE.mdï¼šé¡¹ç›®ç‰¹å®šè§„åˆ™ï¼ˆå¦‚æœéœ€è¦ï¼‰

### 2. MCP é…ç½®åˆå¹¶

Claude Code ä¼šåˆå¹¶å…¨å±€å’Œé¡¹ç›®çº§çš„ MCP é…ç½®ï¼š
- å…¨å±€ `~/.claude/mcp.json`
- é¡¹ç›® `./.claude/settings.local.json`

**ç¤ºä¾‹**ï¼š
```json
// å…¨å±€ mcp.json
{
  "mcpServers": {
    "code-index": {...}
  }
}

// é¡¹ç›® settings.local.json
{
  "mcpServers": {
    "context-monitor": {...}
  }
}

// æœ€ç»ˆåˆå¹¶ç»“æœ
{
  "mcpServers": {
    "code-index": {...},
    "context-monitor": {...}
  }
}
```

### 3. uvx ä¾èµ–

Code Index MCP éœ€è¦ `uvx`ï¼š

```bash
# æ£€æŸ¥æ˜¯å¦å®‰è£…
uvx --version

# å®‰è£…ï¼ˆå¦‚æœéœ€è¦ï¼‰
# Windows
irm https://astral.sh/uv/install.ps1 | iex

# macOS / Linux
curl -LsSf https://astral.sh/uv/install.sh | sh
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: CLAUDE.md æœªç”Ÿæ•ˆ

**ç—‡çŠ¶**ï¼šå¯åŠ¨ Claude Code åï¼Œå·¥ä½œæµæ²¡æœ‰æ¿€æ´»

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls ~/.claude/CLAUDE.md

# æ£€æŸ¥æ–‡ä»¶å†…å®¹
head -20 ~/.claude/CLAUDE.md

# é‡å¯ Claude Code
```

### é—®é¢˜ 2: Code Index MCP æœªåŠ è½½

**ç—‡çŠ¶**ï¼šæ— æ³•ä½¿ç”¨ `search_code_advanced` ç­‰å·¥å…·

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥ mcp.json
cat ~/.claude/mcp.json | grep code-index

# æ£€æŸ¥ uvx
uvx --version

# æ‰‹åŠ¨æµ‹è¯•
uvx code-index-mcp
```

### é—®é¢˜ 3: Context Monitor æœªæ¿€æ´»

**ç—‡çŠ¶**ï¼šæ²¡æœ‰çœ‹åˆ° "Context monitoring active" æç¤º

**åŸå› **ï¼šContext Monitor éœ€è¦åœ¨é¡¹ç›®ä¸­å®‰è£…

**è§£å†³**ï¼š
```bash
cd /path/to/your/project
npm install --save-dev @claude/context-monitor
npm run init
```

---

## ğŸ”„ æ›´æ–°å’Œå¸è½½

### æ›´æ–°å…¨å±€é…ç½®

é‡æ–°è¿è¡Œå®‰è£…è„šæœ¬å³å¯ï¼š
```bash
# Windows
.\install-global-simple.ps1

# macOS / Linux
./install-global.sh
```

æ—§é…ç½®ä¼šè‡ªåŠ¨å¤‡ä»½ã€‚

### æ¢å¤å¤‡ä»½

```bash
# æŸ¥æ‰¾å¤‡ä»½æ–‡ä»¶
ls ~/.claude/*.backup.*

# æ¢å¤
cp ~/.claude/CLAUDE.md.backup.20251217_170021 ~/.claude/CLAUDE.md
cp ~/.claude/mcp.json.backup.20251217_170021 ~/.claude/mcp.json
```

### å¸è½½

```bash
# åˆ é™¤ CLAUDE.md
rm ~/.claude/CLAUDE.md

# ä» mcp.json ä¸­ç§»é™¤ code-index
# æ‰‹åŠ¨ç¼–è¾‘ ~/.claude/mcp.jsonï¼Œåˆ é™¤ code-index éƒ¨åˆ†
```

---

## ğŸ“ è·å–å¸®åŠ©

### æ–‡æ¡£

- **CLAUDE.md** - å®Œæ•´å·¥ä½œæµå®šä¹‰
- **INTEGRATED_WORKFLOW_GUIDE.md** - å¿«é€Ÿå‚è€ƒ
- **INTEGRATION_SUMMARY.md** - æ•´åˆæ€»ç»“

### æµ‹è¯•

```bash
# æµ‹è¯•å…¨å±€é…ç½®
bash test-integrated-setup.sh

# æµ‹è¯•é¡¹ç›®é…ç½®
cd /path/to/project
bash .claude/test-context-monitor.sh
```

### ç¤¾åŒº

- GitHub Issues: https://github.com/wuciqiang/context-monitor/issues
- é¡¹ç›®ä¸»é¡µ: https://github.com/wuciqiang/context-monitor

---

## ğŸ‰ æ€»ç»“

### å®‰è£…å®Œæˆå

âœ… **å…¨å±€é…ç½®**ï¼š
- CLAUDE.md å·²å®‰è£…åˆ° `~/.claude/`
- Code Index MCP å·²é…ç½®åˆ° `~/.claude/mcp.json`
- æ‰€æœ‰é¡¹ç›®è‡ªåŠ¨ä½¿ç”¨æ•´åˆå·¥ä½œæµ

âœ… **ä¸‹ä¸€æ­¥**ï¼š
1. é‡å¯ Claude Code
2. åœ¨ä»»ä½•é¡¹ç›®ä¸­åˆå§‹åŒ–ä»£ç ç´¢å¼•
3. äº«å—æ™ºèƒ½åŒ–çš„å¼€å‘ä½“éªŒï¼

âš ï¸ **å¯é€‰**ï¼š
- åœ¨éœ€è¦ä¸Šä¸‹æ–‡ç›‘æ§çš„é¡¹ç›®ä¸­å®‰è£… Context Monitor
- å®‰è£… Codex/Gemini CLI ä»¥ä½¿ç”¨å®Œæ•´çš„å¤šæ¨¡å‹åä½œ

---

**ç‰ˆæœ¬**: 2.0.0 (Global)
**æœ€åæ›´æ–°**: 2025-12-17
**ç»´æŠ¤è€…**: Project Team
